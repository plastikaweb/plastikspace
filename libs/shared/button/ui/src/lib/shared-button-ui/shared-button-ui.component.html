<button
  *ngIf="config.type === 'button'"
  mat-button
  [ngClass]="config.classes || {}"
  [disabled]="config.disabled"
  class="button--rounded"
  [attr.aria-label]="config.ariaLabel"
  (click)="onClick()"
>
  <ng-container *ngTemplateOutlet="content"></ng-container>
</button>

<a *ngIf="config.type === 'link'" class="block" [attr.aria-label]="config.ariaLabel" [href]="config.link" target="_blank">
  <ng-container *ngTemplateOutlet="content">button content</ng-container>
</a>

<ng-template #content>
  <ng-container *ngFor="let element of config.elements; index as i; trackBy: trackButtonsContent">
    <ng-container *ngIf="element.type === 'text'">
      <span>{{ element.content | returnAsObservable | ngrxPush }}</span>
    </ng-container>

    <ng-container *ngIf="element.type === 'icon'">
      <svg-icon
        [src]="(element.content | returnAsObservable | ngrxPush)?.iconPath || ''"
        [svgClass]="(element.content | returnAsObservable | ngrxPush)?.svgClass || ''"
      ></svg-icon>
    </ng-container>
  </ng-container>
</ng-template>
